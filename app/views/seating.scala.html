@(s: Showing,seatsNo:Int)(implicit session: Session)

@main("Seating Plan") {
    <script>
        var selectedSeats=0
        var availability=@s.seatsAvailable
        var seats =[[]]
        window.onload = function() {
            if (@seatsNo>availability){
                alert("Select less than " + availability + " seats!")
                history.go(-1)
            }
        }

            function changeImage(id, src) {

                if (src.indexOf("your-choice") !== -1) {
                    if(selectedSeats<@seatsNo) {
                        document.getElementById(id).src = "@routes.Assets.at("images/choosen-person.png")"
                        selectSeat(id)
                    }
                    else
                        alert("Maximum number of seats selected!")
                }
                else {
                    document.getElementById(id).src = "@routes.Assets.at("images/your-choice.png")"
                    unselectSeat("p" + id)
                }

            }
            function selectSeat(id) {
            var ids=id.split(" ")
            seats.push(ids)

            selectedSeats++
                var p = document.createElement("p")
                p.id = "p" + id
                p.innerHTML = "Seat: [" + id.toString() + "]"
                document.getElementById("selectedseats").appendChild(p)
            }
            function unselectSeat(id) {
            var ids=id.split(" ")
                seats.splice(seats.indexOf(ids),1)

            selectedSeats--
                var elem = document.getElementById(id);
                elem.parentNode.removeChild(elem)
            }

            function submitSeats(){
            window.location.href="/userinfo?seats="+seats.toString
            }

    </script>
    <h1>Seating Plan </h1><br>
    <button id="seats" onclick="submitSeats()">Submit Seats</button>
    <div class="row">

        <div class="col-lg-12">
            @for(row <- 0 until s.seats.length) {
                <h1>Row @{
                    row + 1
                }</h1>
                @for(col <- 0 to 9) {
                    @if(s.seats(row)(col) == 0) {
                        <input id="@row @col" type="image" src="@routes.Assets.at("images/your-choice.png")" onclick="changeImage(id, src)"/>
                    } else {
                        <input id="@row @col" type="image" src="@routes.Assets.at("images/your-unavaliable.png")" />
                    }

                }
                <br>
                <br>
            }
            <div id="selectedseats">
                <H1>Seats Selected: </H1>

            </div>
        </div>

    </div>


}